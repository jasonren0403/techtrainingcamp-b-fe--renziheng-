(self.webpackChunksearchdemo=self.webpackChunksearchdemo||[]).push([[885],{9659:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(3645),r=a.n(s)()((function(e){return e[1]}));r.push([e.id,"\n.back-area[data-v-6555477f] {\n\tmargin: 1em auto;\n}\n.area-wrapper[data-v-6555477f] {\n\tpadding: 5px 10px;\n\tborder: none;\n\tborder-radius: 5px;\n}\n.area-wrapper[data-v-6555477f]:hover {\n\tbackground-color: rgba(0, 245, 143, 0.79);\n\tanimation: 1s ease-in;\n}\n#search-msg[data-v-6555477f] {\n\tmargin-top: 1em;\n\tposition: relative;\n\tleft: -0.5em;\n\tline-height: 1.2em;\n}\n@media screen and (max-width: 767px) {\n#search-msg[data-v-6555477f] {\n\t\tposition: relative;\n\t\tleft: 0;\n\t\tpadding: 0 0.4em;\n}\n}\n",""]);const n=r},2885:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=function(){var e=this,t=e._self._c;return t("div",{style:{"min-height":"400px"},attrs:{id:"searchResult"},on:{pageChange:e.pageChange}},[e.result&&e.result.length>0?t("transition-group",{key:1,attrs:{id:"searchItems",name:"fade",tag:"div"}},e._l(e.result,(function(e){return t("search-result-item",{key:e.create_time,staticStyle:{"animation-duration":"0.3s"},attrs:{item:e}})})),1):t("div",{key:2,attrs:{id:"search-msg"}},[e._v(e._s(e.msg))]),e._v(" "),t("page-control",{attrs:{cur_page:e.cur_page,max_page:e.max_page}}),e._v(" "),t("div",{staticClass:"back-area"},[t("span",{staticClass:"area-wrapper"},[t("router-link",{attrs:{to:{name:"home"}}},[t("span",{staticClass:"iconfont iconfanhui"}),e._v("  返回到主页")])],1)])],1)};s._withStripped=!0;const r={name:"search-result",components:{pageControl:function(){return a.e(731).then(a.bind(a,4731))},searchResultItem:function(){return a.e(573).then(a.bind(a,6573))}},created:function(){console.log("loading");var e=Number(this.$route.params.page)-1||0;this.keyword=void 0===this.$route.params.kw?"":this.$route.params.kw,this.fetchResult(e,this.keyword)},data:function(){return{cur_page:1,max_page:1,result:[],msg:"",keyword:""}},methods:{fetchResult:function(e,t){this.msg="";var a=void 0===this.$route.params.kw?t:this.$route.params.kw;console.log("[fetchResult] offset: "+e+" keyword: "+a+" keyword before: "+this.keyword);var s=this,r=t===this.keyword,n=10*e;a.length>0&&this.$axios.get("https://i.snssdk.com/search/api/study/",{params:{keyword:a,offset:n}}).then((function(e){if(e.data&&0===e.data.code){var o=e.data.total;s.result=e.data.data,0===o?s.msg="啊这……没有结果显示啊ヾ(ﾟ∀ﾟゞ)，换个别的试试？":(r?s.max_page=Math.ceil(o/10):s.keyword=t,s.cur_page=Math.min(n+1,s.max_page),document.title="searchDemo - "+a+"的搜索结果")}})).catch((function(e){console.log(e),s.msg="搜索失败了呢ヽ(≧□≦)ノ，待会再试吧"}))},pageChange:function(e,t){console.log("[pageChange] "+e+" "+t),this.fetchResult(e-1||0)}},watch:{$route:function(e,t){console.log("[SearchResult] From "+t.params.page+" To "+e.params.page+" max "+this.max_page);var a=e.params.page;if(t.params.page,a<=this.max_page&&a>=1)return this.fetchResult(a-1,e.params.keyword),void console.log("[SearchResult] new result fetched: page "+e.params.page);this.$router.back()},keyword:function(e,t){void 0!==e&&e.length>0&&(console.log(e),this.fetchResult(this.$route.params.page-1||0,e))}}};a(6381);const n=(0,a(1900).Z)(r,s,[],!1,null,"6555477f",null).exports},6381:(e,t,a)=>{var s=a(9659);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,a(5346).Z)("2020b504",s,!1,{})}}]);